<!DOCTYPE html>
<html>
<head>
  <title>SurWave Upload</title>
</head>
<body>

<h2>Upload Song</h2>

<input type="file" id="songFile" accept="audio/*">
<br><br>
<button onclick="uploadSong()">Upload</button>

<p id="status"></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyBKLIkIKE0dnGJIcqzwjsE-xAf4o6yr0hU",
  authDomain: "surwave-music.firebaseapp.com",
  projectId: "surwave-music",
  storageBucket: "surwave-music.firebasestorage.app",
  messagingSenderId: "561946331576",
  appId: "1:561946331576:web:573eab138d761a1b9ce74d",
  measurementId: "G-DR7D6D9B7W"
};

const app = initializeApp(firebaseConfig);
const storage = getStorage(app);

window.uploadSong = async function() {
  const file = document.getElementById("songFile").files[0];
  if (!file) {
    alert("File select karo");
    return;
  }

  const storageRef = ref(storage, "songs/" + file.name);

  document.getElementById("status").innerText = "Uploading...";

  await uploadBytes(storageRef, file);
  const url = await getDownloadURL(storageRef);

  document.getElementById("status").innerHTML =
    "Upload Complete âœ…<br>Song URL:<br>" + url;
};
</script>

</body>
</html>
